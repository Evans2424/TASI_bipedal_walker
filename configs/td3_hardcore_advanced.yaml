# TD3 Configuration for Bipedal Walker (Hardcore Advanced with Reward Shaping)
# This config includes advanced reward shaping and wrapper settings optimized for hardcore mode

# Environment settings
env:
  name: "BipedalWalker-v3"
  hardcore: true
  reward_scale: 1.0
  clip_observations: false
  clip_actions: true
  num_eval_envs: 5  # Number of environments for evaluation
  normalize_observations: true  # Critical for hardcore mode
  normalize_rewards: true  # Critical for hardcore mode
  clip_normalized_obs: 10.0
  clip_normalized_reward: 10.0
  # Wrapper settings for hardcore mode
  use_hardcore_wrapper: true  # Enable frame skip, reward shaping, smoothness penalties
  frame_skip: 4  # Repeat actions for 4 frames (proven effective)
  smoothness_coef: 0.2  # INCREASED: Stronger penalty for jerky actions
  hull_angle_coef: 0.1  # INCREASED: Stronger penalty for tilting
  hull_angular_vel_coef: 0.05  # INCREASED: Stronger penalty for rotation

# Agent settings
agent:
  type: "td3"
  hidden_dims: [256, 256]
  learning_rate: 3.0e-4
  gamma: 0.99
  tau: 0.005  # Soft update coefficient (polyak parameter)
  target_noise: 0.2  # Standard deviation of noise added to target actions (policy smoothing std)
  noise_clip: 0.5  # Clipping range for target smoothing noise
  policy_update_freq: 2  # Update actor every N critic updates (delayed update) (policy delay)

# Replay buffer settings
buffer:
  capacity: 1000000
  batch_size: 256

# Training settings
training:
  total_timesteps: 5000000
  learning_starts: 20000  # Start training after this many steps (increased for hardcore)
  train_frequency: 1  # Update every N steps
  gradient_steps: 1  # Number of gradient steps per update
  eval_frequency: 20000  # Evaluate every N steps
  eval_episodes: 10
  save_frequency: 100000  # Save checkpoint every N steps
  log_frequency: 1000  # Log metrics every N steps

# Exploration settings
exploration:
  initial_random_steps: 20000  # Pure random exploration initially (increased for hardcore)

# Experiment settings
experiment:
  name: "td3_hardcore_advanced"
  seed: 42
  device: "cpu"  # "cuda", "mps" (for Mac M1/M2/M3), or "cpu"

# Paths
paths:
  checkpoints: "experiments/checkpoints"
  logs: "experiments/logs"
  videos: "experiments/videos"
